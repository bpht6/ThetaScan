<?phpheader( 'Content-type: text/html; charset=utf-8' );date_default_timezone_set('UTC');$address = $_GET["address"];$year = $_GET["year"];$date = new Datetime("now");$now = $date->format("U");$yesterday = $now - 86400;$t=time();$current_year = date("Y",$t);$max_year = date("Y",$t);$current_month = date("m",$t);if ($year > 1900) {$current_year = $year;}$month = strtotime($current_month."/01/".$current_year);$last_year = $current_year - 1;$next_year = $current_year + 1;$jan = strtotime("01/01/".$current_year);$feb = strtotime("02/01/".$current_year);$mar = strtotime("03/01/".$current_year);$apr = strtotime("04/01/".$current_year);$may = strtotime("05/01/".$current_year);$jun = strtotime("06/01/".$current_year);$jul = strtotime("07/01/".$current_year);$aug = strtotime("08/01/".$current_year);$sep = strtotime("09/01/".$current_year);$oct = strtotime("10/01/".$current_year);$nov = strtotime("11/01/".$current_year);$dec = strtotime("12/01/".$current_year);$e_dec = strtotime("01/01/".$next_year);$config = parse_ini_file('/var/www/config.ini');        $host = $config['host'];        $user = $config['user'];        $database = $config['database'];        $database2 = $config['database2'];        $password = $config['password'];                $con=mysqli_connect($host,$user,$password,$database);if (mysqli_connect_errno()) {	echo "Failed to connect to MySQL: " . mysqli_connect_error();}$con1=mysqli_connect($host,$user,$password,$database2);if (mysqli_connect_errno()) {	echo "Failed to connect to MySQL: " . mysqli_connect_error();}$result = mysqli_query($con1, "SELECT number,last_block FROM block");{  	while($row = mysqli_fetch_array($result)) {		if ($row['last_block'] == "last_block"){			$last_block = $row['number'];		}	}}$result = mysqli_query($con, "SELECT * FROM prices ");{  	while($row = mysqli_fetch_array($result)) {		if ($row["name"]=="TFUEL") {			$tfuel_price = $row["price"];		}		if ($row["name"]=="THETA") {			$theta_price = $row["price"];		}	}}$result = mysqli_query($con1, "SELECT theta,type FROM guardian WHERE address = '$address' ORDER BY timestamp ASC") ;{  	while($row = mysqli_fetch_array($result)) {		if ($row['type'] == 10){			$theta =  $row['theta']/1000000000000000000 + $theta;		}		else if ($row['type'] == 9){			$theta = 0;		}else{			if ($row['type'] == 10){$theta =  $row['theta']/1000000000000000000;}		}	}}$url = 'http://localhost/rpc';$data = array("jsonrpc" => "2.0","method" => "theta.GetAccount","params"=>[array("address"=>"$address")],"id"=>"1");$postdata = json_encode($data);$ch = curl_init($url);curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);curl_setopt($ch, CURLOPT_PORT, 16888);curl_setopt($ch, CURLOPT_POST, 1);curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));$result = curl_exec($ch);curl_close($ch);$details = json_decode($result, true);$account_tfuel= $details['result']['coins']['tfuelwei']/1000000000000000000;echo'<html><head><title>ThetaScan.io - Staking Address Details</title><style>a.a {        font-family: Georgia, Times, Times New Roman, serif;        font-size: 2.1em;        color:#005eff;        float: left;        display: block;        text-align: center;        padding: 14px 16px;        text-decoration: none;}a.b {        font-family: Georgia, Times, Times New Roman, serif;}body {        background-color: #ebebeb;        font-family: Gill Sans, Gill Sans MT, Calibri, sans-serif; }div.a {        background-color: #ffffff;        width: 600px;        display: inline-block;}div.b {        float: left;          font-size: 20px;        display: block;        padding: 10px 5px;}div.d {        background-color: #ffffff;        width: 1200px;        display: inline-block;}a:link {  text-decoration: none;  color: black;}a:visited {  text-decoration: none;  color: black;}a:hover {  text-decoration: none;  color: black;}a:active {  text-decoration: none;  color: black;}.menu a.b {        float: left;        display: block;        color: black;        text-align: center;        padding: 26px 16px;        text-decoration: none;        font-size: 20px;}.menu a.c {        float: left;        display: block;}.menu {        overflow: hidden;        background-color: #ebebeb;        width: 1200px;}.menu .search{        float: right;}.menu input[type=text] {        padding: 6px;        margin-top: 20px;        font-size: 17px;        border: none;}.menu .search button {        float: right;        padding: 6px 10px;        margin-top: 20px;        margin-right: 16px;        background-color: #005eff;        color: #ffffff;        font-size: 17px;        border: none;        cursor: pointer;}select.a{ float: right;        padding: 6px 10px;        margin-top: 4px;        margin-right: 0px;        background-color: #005eff;        color: #ffffff;        font-size: 17px;        border: none;}.loader {  border: 40px solid #f3f3f3;  border-radius: 50%;  border-top: 40px solid #3498db;  width: 200px;  height: 200px;  -webkit-animation: spin 1s linear infinite; /* Safari */  animation: spin 1s linear infinite;}@-webkit-keyframes spin {  0% { -webkit-transform: rotate(0deg); }  100% { -webkit-transform: rotate(360deg); }}@keyframes spin {  0% { transform: rotate(0deg); }  100% { transform: rotate(360deg); }}</style></head><body><center><div class="menu">	<a class="c"> <img src="/theta.jpg"> </a>	<a class="a" href="/" style="color:#005eff;"> ThetaScan.io</a>	<a class="b" href="/blocks.php">Blocks</a>	<a class="b" href="/staking.php">Staking Addresses</a>	<div class="search">	        <form action="/address.php">	                <input type="text" placeholder="Enter Address / Transaction Hash" name="address" size="35">	                <button type="submit">Search</button>	        </form>	</div>	<div>		<form action="/network.php">  			<select class="a" name = "network"onchange="this.form.submit()">  				<option value="main_net">Main Net</option>  				<option value="test_net">Test Net</option>			</select>     		</form>  	</div></div><br><div class="d">	<div class="b" style="width: 120px;"> <a style="float:left;"> Address </a></div>	<div class="b"> <a href="/address.php?address='.$address.'"><b>'.$address.'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> Theta Staked </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($theta,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> Theta Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($theta)*$theta_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Balance </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($account_tfuel,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($account_tfuel)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div id="loading" class="loader"></div><div id="loading2"> Loading - Please Wait </div>	';		ob_flush();	flush();	$result = mysqli_query($con1, "SELECT tfuel,timestamp FROM coinbase WHERE address = '$address' and timestamp >= '$jan' and timestamp <= '$e_dec'");	{  		while($row = mysqli_fetch_array($result)) {			if ($row["timestamp"] > $yesterday) {				$tfuel_daily = $tfuel_daily + $row["tfuel"];			}			if ($row["timestamp"] > $month) {				$tfuel_month = $tfuel_month + $row["tfuel"];			}			if ($row["timestamp"] > $jan) {				$tfuel_year = $tfuel_year + $row["tfuel"];			}			if ($row["timestamp"] >= $jan and $row["timestamp"] < $feb) {				$tfuel_jan = $tfuel_jan + $row["tfuel"];			}			if ($row["timestamp"] >= $feb and $row["timestamp"] < $mar) {				$tfuel_feb = $tfuel_feb + $row["tfuel"];			}			if ($row["timestamp"] >= $mar and $row["timestamp"] < $apr) {				$tfuel_mar = $tfuel_mar + $row["tfuel"];			}			if ($row["timestamp"] >= $apr and $row["timestamp"] < $may) {				$tfuel_apr = $tfuel_apr + $row["tfuel"];			}			if ($row["timestamp"] >= $may and $row["timestamp"] < $jun) {				$tfuel_may = $tfuel_may + $row["tfuel"];			}			if ($row["timestamp"] >= $jun and $row["timestamp"] < $jul) {				$tfuel_jun = $tfuel_jun + $row["tfuel"];			}			if ($row["timestamp"] >= $jul and $row["timestamp"] < $aug) {				$tfuel_jul = $tfuel_jul + $row["tfuel"];			}			if ($row["timestamp"] >= $aug and $row["timestamp"] < $sep) {				$tfuel_aug = $tfuel_aug + $row["tfuel"];			}			if ($row["timestamp"] >= $sep and $row["timestamp"] < $oct) {				$tfuel_sep = $tfuel_sep + $row["tfuel"];			}			if ($row["timestamp"] >= $oct and $row["timestamp"] < $nov) {				$tfuel_oct = $tfuel_oct + $row["tfuel"];			}			if ($row["timestamp"] >= $nov and $row["timestamp"] < $dec) {				$tfuel_nov = $tfuel_nov + $row["tfuel"];			}			if ($row["timestamp"] >= $dec and $row["timestamp"] < $e_dec) {				$tfuel_dec = $tfuel_dec + $row["tfuel"];			}		}	}	echo'	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> Last 24 Hour Return  </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_daily/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value  </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_daily/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> Month To Date Return  </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_month/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value  </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_month/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> Year To Date Return  </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_year/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value  </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_year/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="float:left; padding: 10px 5px;"><a onclick="return submitForm(this);" style="float:left;" href="/download_coinbase.php?address='.$address.'&year='.$current_year.'"> Export Transactions </a></div>	<div style="float:left; padding: 10px 5px;"><img src="/download.jpg" width="25" height="25"> </a></div>	<br><br></div><br><br><div class="d">	<div class="b" style="width: 1190px;"> <a style="float:left;"><b> Monthly Details for '.$current_year.' </b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> January Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_jan/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_jan/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> February Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_feb/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_feb/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> March Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_mar/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_mar/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> April Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_apr/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_apr/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> May Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_may/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_may/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> June Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_jun/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_jun/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> July Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_jul/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_jul/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> August Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_aug/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_aug/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> September Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_sep/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_sep/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> October Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_oct/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_oct/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> November Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_nov/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_nov/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> December Return </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b>'.number_format($tfuel_dec/1000000000000000000,2).'</b></a></div>	<div style="width: 200px; float:left; padding: 10px 5px;"><a style="float:left;"> TFuel Value </a></div>	<div style="width: 220px; float:left; padding: 10px 5px;"><a style="float:left;"><b> $'.number_format(($tfuel_dec/1000000000000000000)*$tfuel_price,2).'</b></a></div>	<br><br><hr>';$next_year = $current_year +1;if ($current_year < $max_year) {	echo'<div style="width: 220px; float:left;"><a href="/staking_address.php?address='.$address.'&year='.$next_year.'"> << Back </a></div>';}echo'<div style="width: 220px; float:right;"><a href="/staking_address.php?address='.$address.'&year='.$last_year.'" > Next >> </a></div><br><br></div><br><br><br><div style="width:1200px;">	<div style="float:left;"><a href="/broadcast_txn.php"> Broadcast TXN</a></div>	<div style="float:center;"><a href="/status.php"> Node Status</a></div></div><br><br></center></body></html><script type="text/javascript">function submitForm() {  return confirm("It will take the system a moment to build this file. Are you sure you want to download it?  Please be patient.");}document.getElementById("loading").style.display = "none";document.getElementById("loading2").style.display = "none";</script>';?>